-- Create database and user
CREATE DATABASE carbon_credits;
CREATE USER carbon_user WITH PASSWORD 'StrongPassword123';
GRANT ALL PRIVILEGES ON DATABASE carbon_credits TO carbon_user;

-- Ledger table
CREATE TABLE ledger (
    id SERIAL PRIMARY KEY,
    previous_hash VARCHAR(64),
    transaction_data JSONB,
    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    hash VARCHAR(64) UNIQUE
);

-- Users table for authentication
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password_hash VARCHAR(128) NOT NULL,
    role VARCHAR(20) NOT NULL
);
